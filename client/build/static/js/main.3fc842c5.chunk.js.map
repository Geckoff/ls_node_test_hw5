{"version":3,"sources":["store/notifications/index.js","helpers/request.js","store/auth/index.js","constants/routes.js","components/common/PrivateRoute.jsx","components/common/ButtonLink.jsx","components/App/AppHeader.jsx","components/common/AuthFormInput.jsx","components/common/PasswordInput.jsx","components/Auth/LoginForm.jsx","components/Auth/RegistrationForm.jsx","components/Auth/LogoutForm.jsx","components/Auth/Auth.jsx","store/news/index.js","components/News/NewsListCard.jsx","components/News/NewsList.jsx","components/News/NewsAdd.jsx","components/News/News.jsx","store/chat/index.js","components/Chat/ChatChannelList.jsx","components/Chat/ChatActiveChatArea.jsx","components/Chat/Chat.jsx","components/Profile/Profile.jsx","store/adminPanel/index.js","components/AdminPanel/AdminPanelSettingsFormGroup.jsx","components/AdminPanel/AdminPanel.jsx","components/common/withNotificationsHOC.jsx","components/App/App.jsx","theme.js","store/index.js","index.js"],"names":["createActions","OPEN_NOTIFICATION","n","CLOSE_NOTIFICATION","prefix","openNotification","closeNotification","notificationsSelector","state","notifications","handleActions","action","payload","text","variant","id","length","isActive","withoutDeletedNotification","filter","notification","map","not","i","port","window","location","baseURL","protocol","hostname","instance","axios","create","waitQueue","isRefreshDispatched","request","url","method","data","headers","isRefresh","isWithoutToken","getState","dispatch","Promise","resolve","reject","tokensSelector","accessToken","accessTokenExpiredAt","refreshTokenExpiredAt","requestFunc","refreshToken","then","response","catch","error","message","status","errorResponse","console","group","info","dir","groupEnd","logout","detail","isTokenExpired","Date","now","isRefreshExpired","push","refreshTokenRequest","forEach","config","userProfileSelector","auth","userProfile","userPermissionsSelector","permissions","tokens","isAuthorizedSelector","isLoadingUserProfileSelector","isLoadingUserProfile","setProfileData","createAction","setTokenData","logoutUser","setIsLoadingUserProfile","_","image","middleName","surName","username","firstName","defaultPermissions","chat","C","D","R","U","news","settings","permission","combineReducers","getUserProfileFromToken","tokenData","localStorage","getItem","JSON","parse","removeItem","saveProfile","oldPassword","newPassword","avatar","FormData","append","finally","home","registration","profile","adminPanel","connect","isAuthorized","permissionPath","path","component","get","from","to","routes","AdapterLink","React","forwardRef","props","ref","innerRef","ButtonLink","withRouter","children","isRouterLink","color","Button","pathname","AppHeader","this","_get","classes","AppBar","position","className","appBar","Container","Toolbar","logo","src","alt","renderAuthorizedNav","PureComponent","compose","withStyles","flexGrow","AuthFormInput","theme","textField","display","marginBottom","spacing","handleChange","value","label","required","FormControl","InputLabel","htmlFor","Input","type","autoComplete","onChange","startAdornment","InputAdornment","Person","PasswordInput","name","useState","showPassword","values","setValues","classNames","Https","endAdornment","IconButton","aria-label","onClick","onMouseDown","event","preventDefault","Visibility","VisibilityOff","form","flexDirection","padding","maxWidth","textCenter","textAlign","password","target","Paper","onSubmit","setItem","stringify","loginUser","Typography","history","repeatPassword","firstname","lastname","patronicname","registerUser","Auth","wrapper","gutterBottom","exact","LoginForm","RegistrationForm","background","backgroundPosition","backgroundSize","width","flex","paddingTop","isLoadingNewsListSelector","isLoadingNewsList","isLoadingNewsFormSelector","isLoadingNewsForm","isLoadedSelector","isLoaded","newsListSelector","setIsLoadingNewsList","setIsLoadingNewsForm","setNewsList","appendNews","setToZeroNewsList","createNews","title","updateNews","styles","card","NewsListCard","post","isUpdateAllowed","isDeleteAllowed","Card","CardHeader","Avatar","user","subheader","created_at","CardContent","CardActions","deleteNews","NewsList","log","isLoading","isCreateAllowed","key","NewsAdd","createdAt","setState","handleSubmit","match","params","newsList","find","formCard","Grid","container","item","xs","TextField","margin","disabled","fullWidth","multiline","rows","ButtonGroup","News","socket","chatUsersSelector","users","chatMessagesList","messages","chatSelectedRoomSelector","selectedRoom","chatMessageText","messageText","setUsers","addUser","updateUser","removeUser","appendMessage","setRoomHistory","setToZeroMessages","setSelectedRoom","setMessageText","resetMessage","userId","socketId","sendMessage","emit","senderId","recipientId","roomId","column","height","selectRoom","connectRoom","square","Divider","List","index","ListItem","button","selected","ListItemText","primary","ActiveChannelArea","chatArea","direction","wrap","messageContainer","isMyMessage","isAnotherMessage","messagePrimary","messageSecondary","style","InputLabelProps","shrink","backgroundColor","palette","grey","A700","secondary","main","alignSelf","overflowY","alignItems","Chat","socketIO","on","disconnect","ChatActiveChatArea","empty","toolbar","mixins","Profile","confirmPassword","fileRef","createRef","cancelHandler","handleChangeFile","reader","FileReader","onload","e","result","current","files","readAsDataURL","submitHandler","avatarPreviewWrapper","avatarPreview","uploadButton","formActions","borderRadius","flexWrap","marginLeft","marginRight","marginTop","isLoadingUsersSelector","isLoadingUsers","usersSelector","setIsLoadingUsers","setIsLoadingForm","setToZeroUsers","isLoadingForm","getUsers","updateUserPermission","deleteUser","SettingsFormGroup","FormGroup","FormControlLabel","control","Checkbox","checked","defaultState","selectedUserId","selectedUser","AdminPanel","part","partRule","handleChangeUser","_cloneDeep","u","deleteHandler","mb3","userAvatar","userSelect","Select","MenuItem","renderForms","justify","variantIcon","success","CheckCircleIcon","warning","WarningIcon","ErrorIcon","InfoIcon","useStyles1","makeStyles","green","dark","amber","icon","fontSize","iconVariant","opacity","MySnackbarContentWrapper","onClose","other","Icon","SnackbarContent","clsx","aria-describedby","WrappedComponent","mapDispatchToProps","handleClose","notificationId","reason","currentNotification","Snackbar","anchorOrigin","vertical","horizontal","open","autoHideDuration","root","minHeight","mainLayoutWrapper","MainLayout","withLayoutAndNotifications","Component","withNotifications","withLayout","App","Box","createMuiTheme","red","A400","default","rootReducer","createAppStore","createStore","applyMiddleware","thunk","__REDUX_DEVTOOLS_EXTENSION__","noop","ReactDOM","render","ThemeProvider","CssBaseline","store","document","getElementById"],"mappings":"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","file":"static/js/main.3fc842c5.chunk.js","sourcesContent":["import { createActions, handleActions } from 'redux-actions';\n\nexport const { openNotification, closeNotification } = createActions(\n  {\n    OPEN_NOTIFICATION: n => n,\n    CLOSE_NOTIFICATION: n => n\n  },\n  { prefix: 'notifications' }\n);\n\nexport const notificationsSelector = state => state.notifications;\n\nconst notifications = handleActions(\n  {\n    [openNotification]: (state, action) => {\n      const { text, variant } = action.payload;\n      return [\n        ...state,\n        { text, variant, id: state.length + 1, isActive: !state.length }\n      ];\n    },\n    [closeNotification]: (state, action) => {\n      const withoutDeletedNotification = state.filter(\n        notification => notification.id !== action.payload\n      );\n      return withoutDeletedNotification.length\n        ? withoutDeletedNotification.map((not, i) => {\n            if (i === withoutDeletedNotification.length - 1) {\n              not.isActive = true;\n            }\n            return not;\n          })\n        : withoutDeletedNotification;\n    }\n  },\n  []\n);\n\nexport default notifications;\n","import axios from \"axios\";\nimport { tokensSelector, refreshTokenRequest, logout } from \"../store/auth\";\nimport { openNotification } from \"../store/notifications\";\nconst port = window.location.port ? `:${window.location.port}` : \"\";\nconst baseURL = `${window.location.protocol}//${window.location.hostname}${port}/api/`;\nconst instance = axios.create({ baseURL });\n\nconst waitQueue = [];\nlet isRefreshDispatched = false;\n\nconst request = ({\n\turl,\n\tmethod,\n\tdata,\n\theaders = {},\n\tisRefresh,\n\tisWithoutToken,\n\tgetState = () => ({}),\n\tdispatch = () => {},\n}) =>\n\tnew Promise((resolve, reject) => {\n\t\tconst { accessToken, accessTokenExpiredAt, refreshTokenExpiredAt } = tokensSelector(\n\t\t\tgetState()\n\t\t);\n\n\t\t// request handler\n\t\tconst requestFunc = ({ url, method, headers, data, resolve, reject }) => {\n\t\t\tif (!isWithoutToken) {\n\t\t\t\tconst { accessToken, refreshToken } = tokensSelector(getState());\n\t\t\t\theaders[\"Authorization\"] = isRefresh ? refreshToken : accessToken;\n\t\t\t}\n\n\t\t\treturn instance({ url, method, headers, data })\n\t\t\t\t.then((response) => {\n\t\t\t\t\tresolve(response.data);\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tif (error.response) {\n\t\t\t\t\t\tconst status = error.response.status || 404;\n\t\t\t\t\t\tconst errorResponse = error.response.data;\n\t\t\t\t\t\tconsole.group(\"Error from: \" + url);\n\t\t\t\t\t\tconsole.info(\"Status: \" + status);\n\t\t\t\t\t\tconsole.dir(errorResponse);\n\t\t\t\t\t\tconsole.groupEnd();\n\n\t\t\t\t\t\tswitch (status) {\n\t\t\t\t\t\t\tcase 401:\n\t\t\t\t\t\t\tcase 403:\n\t\t\t\t\t\t\t\tdispatch(logout());\n\t\t\t\t\t\t\t\treturn reject(errorResponse);\n\t\t\t\t\t\t\tcase 500:\n\t\t\t\t\t\t\tcase 502:\n\t\t\t\t\t\t\tcase 503:\n\t\t\t\t\t\t\t\tdispatch(\n\t\t\t\t\t\t\t\t\topenNotification({\n\t\t\t\t\t\t\t\t\t\tvariant: \"error\",\n\t\t\t\t\t\t\t\t\t\ttext: `${status}!\\nSomething is wrong))`,\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\treturn reject({ detail: \"Unknown error\" });\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\treturn reject(errorResponse);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdispatch(\n\t\t\t\t\t\t\topenNotification({\n\t\t\t\t\t\t\t\tvariant: \"error\",\n\t\t\t\t\t\t\t\ttext: `Error!!\\n${error.message}`,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t\treturn reject(error.message);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t};\n\n\t\tconst isTokenExpired = accessTokenExpiredAt <= Date.now();\n\t\tconst isRefreshExpired = refreshTokenExpiredAt <= Date.now();\n\n\t\t// If should refresh token\n\t\tif (accessToken && isTokenExpired && !isRefreshExpired && !isWithoutToken) {\n\t\t\t// push original request to waiting stack\n\t\t\t!isRefresh &&\n\t\t\t\twaitQueue.push({\n\t\t\t\t\turl,\n\t\t\t\t\tmethod,\n\t\t\t\t\tdata,\n\t\t\t\t\theaders,\n\t\t\t\t\tisRefresh,\n\t\t\t\t\tresolve,\n\t\t\t\t\treject,\n\t\t\t\t});\n\n\t\t\t// dispatch refresh token (first-time only!)\n\t\t\tif (!isRefresh && !isRefreshDispatched) {\n\t\t\t\tisRefreshDispatched = true;\n\t\t\t\tdispatch(refreshTokenRequest())\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tisRefreshDispatched = false;\n\t\t\t\t\t\t// and after refresh - execute requests from waiting stack\n\t\t\t\t\t\twaitQueue.forEach((config) => requestFunc(config));\n\t\t\t\t\t})\n\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\t// by default in error - logout user\n\t\t\t\t\t\tdispatch(logout());\n\t\t\t\t\t\t// eslint-disable-next-line\n\t\t\t\t\t\treject({ detail: \"Refresh token error\" });\n\t\t\t\t\t});\n\t\t\t} else if (isRefresh) {\n\t\t\t\t// if has been called refresh method\n\t\t\t\trequestFunc({ url, method, data, headers, resolve, reject });\n\t\t\t}\n\t\t} else if (isRefreshExpired && !isWithoutToken) {\n\t\t\t// if refresh is expired - just logout\n\t\t\tdispatch(logout());\n\t\t\t// eslint-disable-next-line\n\t\t\treject({ detail: \"Refresh token is expired\" });\n\t\t} else {\n\t\t\t// by default\n\t\t\trequestFunc({ url, method, data, headers, resolve, reject });\n\t\t}\n\t});\n\nexport default request;\n","import { createAction, handleActions } from 'redux-actions';\nimport { combineReducers } from 'redux';\nimport request from '../../helpers/request';\nimport { openNotification } from '../notifications';\nexport const userProfileSelector = state => state.auth.userProfile;\nexport const userPermissionsSelector = state => state.auth.permissions;\nexport const tokensSelector = state => state.auth.tokens;\nexport const isAuthorizedSelector = state => !!state.auth.tokens.accessToken;\nexport const isLoadingUserProfileSelector = state => state.auth.isLoadingUserProfile;\n\nconst actionsPrefix = 'AUTH';\nexport const loginUserRequest = createAction(`${actionsPrefix}/LOGIN_USER_REQUEST`);\nexport const registrationUserRequest = createAction(`${actionsPrefix}/REGISTRATION_USER_REQUEST`);\nexport const setProfileData = createAction(`${actionsPrefix}/SET_PROFILE_DATA`);\nexport const setTokenData = createAction(`${actionsPrefix}/SET_TOKEN_DATA`);\nexport const logoutUser = createAction(`${actionsPrefix}/LOGOUT_USER`);\nexport const setIsLoadingUserProfile = createAction(`${actionsPrefix}/SET_IS_LOADING_USER_PROFILE`);\n\nconst isLoadingUserProfile = handleActions(\n  {\n    [setIsLoadingUserProfile]: (_, action) => action.payload\n  },\n  false\n);\n\nconst userProfile = handleActions(\n  {\n    [setProfileData]: (state, action) => {\n      const { id, image, middleName, surName, username, firstName } = action.payload;\n      return { id, image, firstName, middleName, surName, username };\n    },\n    [logoutUser]: () => null\n  },\n  null\n);\nconst defaultPermissions = {\n  chat: { C: false, D: false, R: false, U: false },\n  news: { C: false, D: false, R: false, U: false },\n  settings: { C: false, D: false, R: false, U: false }\n};\nconst permissions = handleActions(\n  {\n    [setProfileData]: (state, action) => {\n      const { permission } = action.payload;\n      return permission;\n    },\n    [logoutUser]: () => defaultPermissions\n  },\n  defaultPermissions\n);\n\nconst tokens = handleActions(\n  {\n    [setTokenData]: (state, action) => {\n      const {\n        accessToken,\n        accessTokenExpiredAt,\n        refreshToken,\n        refreshTokenExpiredAt\n      } = action.payload;\n      return {\n        accessToken,\n        accessTokenExpiredAt,\n        refreshToken,\n        refreshTokenExpiredAt\n      };\n    },\n    [logoutUser]: () => ({\n      accessToken: null,\n      accessTokenExpiredAt: null,\n      refreshToken: null,\n      refreshTokenExpiredAt: null\n    })\n  },\n  {\n    accessToken: null,\n    accessTokenExpiredAt: null,\n    refreshToken: null,\n    refreshTokenExpiredAt: null\n  }\n);\n\nexport default combineReducers({\n  userProfile,\n  permissions,\n  tokens,\n  isLoadingUserProfile\n});\n\nexport const loginUser = ({ username, password }) => (dispatch, getState) =>\n  new Promise((resolve, reject) => {\n    const data = {\n      username,\n      password\n    };\n    request({\n      url: '/login',\n      method: 'POST',\n      data,\n      isWithoutToken: true,\n      dispatch,\n      getState\n    })\n      .then(data => {\n        dispatch(openNotification({ text: 'Вы успешно вошли!', variant: 'success' }));\n        const { accessToken, accessTokenExpiredAt, refreshToken, refreshTokenExpiredAt } = data;\n        localStorage.setItem(\n          'token-data',\n          JSON.stringify({\n            accessToken,\n            accessTokenExpiredAt,\n            refreshToken,\n            refreshTokenExpiredAt\n          })\n        );\n        dispatch(setProfileData(data));\n        dispatch(setTokenData(data));\n        resolve(data);\n      })\n      .catch(error => {\n        dispatch(\n          openNotification({\n            text: error.message,\n            variant: 'error'\n          })\n        );\n        reject(error);\n      });\n  });\n\nexport const registerUser = ({ username, password, firstname, lastname, patronicname }) => (\n  dispatch,\n  getState\n) =>\n  new Promise((resolve, reject) => {\n    const data = {\n      username,\n      surName: lastname,\n      firstName: firstname,\n      middleName: patronicname,\n      password\n    };\n    request({\n      url: '/registration',\n      data,\n      method: 'POST',\n      isWithoutToken: true,\n      dispatch,\n      getState\n    })\n      .then(() => {\n        dispatch(\n          openNotification({\n            text: 'Вы успешно зарегистрированы!',\n            variant: 'success'\n          })\n        );\n        resolve(data);\n      })\n      .catch(error => {\n        dispatch(\n          openNotification({\n            text: error.message,\n            variant: 'error'\n          })\n        );\n        reject(error);\n      });\n  });\n\nexport const getUserProfileFromToken = () => (dispatch, getState) => {\n  const tokenData = localStorage.getItem('token-data');\n  if (!tokenData) return;\n  dispatch(setTokenData(JSON.parse(tokenData)));\n  request({ url: '/profile', method: 'GET', dispatch, getState })\n    .then(data => {\n      dispatch(setProfileData(data));\n    })\n    .catch(error => {});\n};\n\nexport const refreshTokenRequest = () => (dispatch, getState) =>\n  new Promise((resolve, reject) => {\n    request({ url: '/refresh-token', method: 'POST', isRefresh: true, dispatch, getState })\n      .then(data => {\n        dispatch(setTokenData(data));\n        resolve(resolve);\n      })\n      .catch(error => reject(error));\n  });\n\nexport const logout = () => dispatch => {\n  localStorage.removeItem('token-data');\n  dispatch(logoutUser());\n  openNotification({\n    text: 'Вы вышли из системы',\n    variant: 'info'\n  });\n};\n\nexport const saveProfile = ({ firstName, surName, middleName, oldPassword, newPassword, avatar }) => (\n  dispatch,\n  getState\n) =>\n  new Promise(resolve => {\n    \n    const data = new FormData()\n    data.append('firstName', firstName)\n    data.append('surName', surName)\n    data.append('middleName', middleName)\n    data.append('oldPassword', oldPassword)\n    data.append('newPassword', newPassword)\n    data.append('avatar', avatar);\n\n    dispatch(setIsLoadingUserProfile(true));\n    request({ url: '/profile', method: 'PATCH', data, getState, dispatch })\n      .then(data => {\n        dispatch(setProfileData(data));\n        dispatch(openNotification({ text: 'Профиль успешно обновлен!', variant: 'success' }));\n        resolve(true);\n      })\n      .catch(error => dispatch(openNotification({ text: error.message, variant: 'error' })))\n      .finally(() => dispatch(setIsLoadingUserProfile(false)));\n  });\n","export default {\n    home: '/',\n    registration: '/registration',\n    news: '/news',\n    chat: '/chat',\n    profile: '/profile',\n    adminPanel: '/admin-panel'\n}","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Route, Redirect } from 'react-router-dom';\nimport _ from 'lodash';\nimport {\n  userPermissionsSelector,\n  isAuthorizedSelector\n} from '../../store/auth';\nimport routes from '../../constants/routes';\nconst PrivateRoute = ({\n  permissionPath,\n  path,\n  component,\n  permissions,\n  isAuthorized\n}) => {\n  if (!isAuthorized || (permissionPath && !_.get(permissions, [permissionPath, 'R'], false)))\n    return <Redirect from={path} to={routes.home} />;\n\n  return <Route path={path} component={component} />;\n};\n\nexport default connect(state => ({\n  permissions: userPermissionsSelector(state),\n  isAuthorized: isAuthorizedSelector(state)\n}))(PrivateRoute);\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { withRouter } from 'react-router-dom';\nimport { Button } from '@material-ui/core';\n\nconst AdapterLink = React.forwardRef((props, ref) => (\n  <Link innerRef={ref} {...props} />\n));\n\nconst ButtonLink = withRouter(\n  ({ path, location, children, isRouterLink, color = 'primary' }) => (\n    <Button\n      color={\n        isRouterLink ? (location.pathname === path ? color : 'default') : color\n      }\n      component={AdapterLink}\n      to={path}\n    >\n      {children}\n    </Button>\n  )\n);\n\nexport default ButtonLink;\n","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\nimport { AppBar, Toolbar, Container  } from '@material-ui/core';\nimport { withStyles } from '@material-ui/core/styles';\nimport ButtonLink from '../common/ButtonLink';\nimport routes from '../../constants/routes'\nimport {\n  userPermissionsSelector,\n  isAuthorizedSelector,\n  userProfileSelector\n} from '../../store/auth';\nimport _get from 'lodash.get'\n\nconst styles = () => ({\n  logo: {\n    flexGrow: 1\n  }\n});\n\nclass AppHeader extends PureComponent {\n  renderAuthorizedNav() {\n    const { permissions, profile } = this.props;\n    return (\n      <>\n        {_get(permissions, 'news.R', false) && (\n          <ButtonLink path={routes.news} isRouterLink>\n            Новости\n          </ButtonLink>\n        )}\n        {_get(permissions, 'chat.R', false) && (\n          <ButtonLink path={routes.chat} isRouterLink>\n            Чат\n          </ButtonLink>\n        )}\n\n        {_get(permissions, 'settings.R', false) && (\n          <ButtonLink path={routes.adminPanel} isRouterLink>\n            Админка\n          </ButtonLink>\n        )}\n        <ButtonLink path={routes.profile} isRouterLink>\n        { profile ? profile.username : '' }\n        </ButtonLink>\n      </>\n    );\n  }\n  render() {\n    const { classes, isAuthorized } = this.props;\n    return (\n      <div>\n        <AppBar position=\"static\" color=\"default\" className={classes.appBar}>\n          <Container>\n            <Toolbar>\n              <div className={classes.logo}>\n                <img src=\"../../assets/img/logo.png\" alt=\"logo\" />\n              </div>\n              <ButtonLink path={routes.home} isRouterLink>\n                Главная\n              </ButtonLink>\n              {isAuthorized ? this.renderAuthorizedNav() : null}\n            </Toolbar>\n          </Container>\n        </AppBar>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  isAuthorized: isAuthorizedSelector(state),\n  permissions: userPermissionsSelector(state),\n  profile: userProfileSelector(state)\n});\nexport default compose(\n  withStyles(styles),\n  connect(mapStateToProps)\n)(AppHeader);\n","import React from 'react';\nimport {\n  FormControl,\n  Input,\n  InputLabel,\n  InputAdornment\n} from '@material-ui/core';\nimport { Person } from '@material-ui/icons';\nimport { withStyles } from '@material-ui/core/styles';\n\nconst styles = theme => ({\n  textField: {\n    display: 200,\n    marginBottom: theme.spacing(3)\n  }\n});\n\nconst AuthFormInput = withStyles(styles)(\n  ({ id, classes, handleChange, value, label, required }) => {\n    return (\n      <FormControl className={classes.textField} required={required}>\n        <InputLabel htmlFor={'input-' + id}>{label}</InputLabel>\n        <Input\n          id={'input-' + id}\n          type=\"text\"\n          value={value}\n          autoComplete={id}\n          onChange={handleChange}\n          startAdornment={\n            <InputAdornment position=\"start\">\n              <Person />\n            </InputAdornment>\n          }\n        />\n      </FormControl>\n    );\n  }\n);\n\nexport default AuthFormInput;\n","import React from 'react';\nimport {\n  FormControl,\n  Input,\n  InputLabel,\n  InputAdornment,\n  IconButton\n} from '@material-ui/core';\nimport { Visibility, VisibilityOff, Https } from '@material-ui/icons';\nimport { withStyles } from '@material-ui/core/styles';\nimport classNames from 'classnames';\nconst styles = theme => ({\n  textField: {\n    display: 200,\n    marginBottom: theme.spacing(3)\n  }\n});\n\nconst PasswordInput = withStyles(styles)(\n  ({ id, classes, handleChange, value, label, className, name }) => {\n    const [values, setValues] = React.useState({\n      showPassword: false\n    });\n    const handleClickShowPassword = () => {\n      setValues({ showPassword: !values.showPassword });\n    };\n\n    const handleMouseDownPassword = event => {\n      event.preventDefault();\n    };\n\n    return (\n      <FormControl\n        className={classNames(classes.textField, className)}\n        required\n      >\n        <InputLabel htmlFor={id}>{label}</InputLabel>\n        <Input\n          id={id}\n          autoComplete={id}\n          type={values.showPassword ? 'text' : 'password'}\n          name={name}\n          value={value}\n          onChange={handleChange}\n          startAdornment={\n            <InputAdornment position=\"start\">\n              <Https />\n            </InputAdornment>\n          }\n          endAdornment={\n            <InputAdornment position=\"end\">\n              <IconButton\n                aria-label=\"toggle password visibility\"\n                onClick={handleClickShowPassword}\n                onMouseDown={handleMouseDownPassword}\n              >\n                {values.showPassword ? <Visibility /> : <VisibilityOff />}\n              </IconButton>\n            </InputAdornment>\n          }\n        />\n      </FormControl>\n    );\n  }\n);\n\nexport default PasswordInput;\n","import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { Typography, Paper, Button } from '@material-ui/core';\nimport AuthFormInput from '../common/AuthFormInput';\nimport PasswordInput from '../common/PasswordInput';\nimport { withStyles } from '@material-ui/core/styles';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport { loginUser } from '../../store/auth';\nimport routes from '../../constants/routes';\n\nconst styles = () => ({\n  form: {\n    display: 'flex',\n    flexDirection: 'column',\n    padding: '20px 40px',\n    maxWidth: '300px'\n  },\n  textCenter: {\n    textAlign: 'center'\n  }\n});\n\nconst LoginForm = ({ classes, dispatch }) => {\n  const [values, setValues] = useState({\n    username: '',\n    password: ''\n  });\n  const handleChange = name => event => {\n    setValues({ ...values, [name]: event.target.value });\n  };\n  const handleSubmit = event => {\n    event.preventDefault();\n    const { username, password } = values;\n    dispatch(loginUser({ username, password }));\n  };\n  return (\n    <>\n      <Paper className={classes.form} component=\"form\" onSubmit={handleSubmit}>\n        <AuthFormInput\n          handleChange={handleChange('username')}\n          value={values.username}\n          id=\"username\"\n          label=\"Имя пользователя\"\n          required\n        />\n        <PasswordInput\n          handleChange={handleChange('password')}\n          value={values.password}\n          id=\"password\"\n          label=\"Пароль\"\n        />\n        <Button color=\"primary\" variant=\"contained\" type=\"submit\">\n          Войти\n        </Button>\n      </Paper>\n      <Typography className={classNames(classes.textCenter, classes.form)}>\n        Впервые на сайте? <Link to={routes.registration}>Регистрация</Link>\n      </Typography>\n    </>\n  );\n};\n\nexport default compose(\n  withStyles(styles),\n  connect()\n)(LoginForm);\n","import React, { useState } from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { Typography, Paper, Button } from '@material-ui/core';\nimport AuthFormInput from '../common/AuthFormInput';\nimport PasswordInput from '../common/PasswordInput';\nimport { withStyles } from '@material-ui/core/styles';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport { registerUser } from '../../store/auth';\nimport routes from '../../constants/routes'\nconst styles = () => ({\n  form: {\n    display: 'flex',\n    flexDirection: 'column',\n    padding: '20px 40px',\n    maxWidth: '300px'\n  },\n  textCenter: {\n    textAlign: 'center'\n  }\n});\n\nconst RegistrationForm = ({ classes, dispatch, history }) => {\n  const [values, setValues] = useState({\n    username: '',\n    password: '',\n    repeatPassword: '',\n    firstname: '',\n    lastname: '',\n    patronicname: ''\n  });\n  const handleChange = name => event => {\n    setValues({ ...values, [name]: event.target.value });\n  };\n  const handleSubmit = event => {\n    event.preventDefault();\n    const { username, password, firstname, lastname, patronicname } = values;\n    dispatch(\n      registerUser({ username, password, firstname, lastname, patronicname })\n    )\n      .then(() => history.push(routes.home))\n      .catch(console.error);\n  };\n  return (\n    <>\n      <Paper className={classes.form} component=\"form\" onSubmit={handleSubmit}>\n        <AuthFormInput\n          id=\"username\"\n          handleChange={handleChange('username')}\n          value={values.username}\n          label=\"Имя пользователя\"\n          required\n        />\n        <AuthFormInput\n          id=\"lastname\"\n          handleChange={handleChange('lastname')}\n          value={values.lastname}\n          label=\"Фамилия\"\n        />\n        <AuthFormInput\n          id=\"firstname\"\n          handleChange={handleChange('firstname')}\n          value={values.firstname}\n          label=\"Имя\"\n        />\n        <AuthFormInput\n          id=\"patronicname\"\n          handleChange={handleChange('patronicname')}\n          value={values.patronicname}\n          label=\"Отчество\"\n        />\n        <PasswordInput\n          id=\"password\"\n          handleChange={handleChange('password')}\n          value={values.password}\n          label=\"Пароль\"\n        />\n        <PasswordInput\n          id=\"repeatPassword\"\n          handleChange={handleChange('repeatPassword')}\n          value={values.repeatPassword}\n          label=\"Повторить пароль\"\n        />\n        <Button color=\"primary\" variant=\"contained\" type=\"submit\">\n          Зарегистрироваться\n        </Button>\n      </Paper>\n      <Typography className={classNames(classes.textCenter, classes.form)}>\n        Уже зарегистрированы? <Link to={routes.home}>Войти</Link>\n      </Typography>\n    </>\n  );\n};\n\nexport default compose(\n  withStyles(styles),\n  connect(),\n  withRouter\n)(RegistrationForm);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Paper, Button } from '@material-ui/core';\nimport { withStyles } from '@material-ui/core/styles';\nimport { compose } from 'recompose';\nimport { logout } from '../../store/auth';\n\nconst styles = () => ({\n  form: {\n    display: 'flex',\n    flexDirection: 'column',\n    padding: '20px 40px',\n    maxWidth: '300px'\n  }\n});\nconst LogoutForm = ({ classes, dispatch }) => {\n  const handleSubmit = event => {\n    event.preventDefault();\n    dispatch(logout());\n  };\n  return (\n    <Paper className={classes.form} component=\"form\" onSubmit={handleSubmit}>\n      <Button color=\"primary\" variant=\"contained\" type=\"submit\">\n        Выйти\n      </Button>\n    </Paper>\n  );\n};\n\nexport default compose(\n  withStyles(styles),\n  connect()\n)(LogoutForm);\n","import React, { PureComponent } from 'react';\nimport { Route, withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { Container, Typography } from '@material-ui/core';\nimport { withStyles } from '@material-ui/core/styles';\nimport { compose } from 'recompose';\nimport { isAuthorizedSelector } from '../../store/auth';\n\nimport LoginForm from './LoginForm';\nimport RegistrationForm from './RegistrationForm';\nimport LogoutForm from './LogoutForm';\n\nconst styles = () => ({\n  wrapper: {\n    background: 'url(\"/assets/img/background.png\") no-repeat',\n    backgroundPosition: 'center center',\n    backgroundSize: 'cover',\n    width: '100%',\n    flex: '1 1 100%',\n    paddingTop: '40px'\n  }\n});\n\nclass Auth extends PureComponent {\n  render() {\n    const { classes, isAuthorized } = this.props;\n    return (\n      <div className={classes.wrapper}>\n        <Container>\n          <Typography variant=\"h4\" component=\"h2\" gutterBottom>\n            Ваше уютное\n            <br />\n            рабочее пространство\n          </Typography>\n          {isAuthorized ? (\n            <LogoutForm />\n          ) : (\n            <>\n              <Route path=\"/\" exact component={LoginForm} />\n              <Route path=\"/registration\" component={RegistrationForm} />\n            </>\n          )}\n        </Container>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  isAuthorized: isAuthorizedSelector(state)\n});\n\nexport default compose(\n  withStyles(styles),\n  connect(mapStateToProps),\n  withRouter\n)(Auth);\n","import { createAction, handleActions } from 'redux-actions';\nimport { combineReducers } from 'redux';\nimport request from '../../helpers/request';\n\nexport const isLoadingNewsListSelector = state => state.news.isLoadingNewsList;\nexport const isLoadingNewsFormSelector = state => state.news.isLoadingNewsForm;\nexport const isLoadedSelector = state => state.news.isLoaded;\nexport const newsListSelector = state => state.news.news;\n\nconst actionsPrefix = 'NEWS'\nexport const setIsLoadingNewsList = createAction(`${actionsPrefix}/SET_IS_LOADING_NEWS_LIST`)\nexport const setIsLoadingNewsForm = createAction(`${actionsPrefix}/SET_IS_LOADING_NEWS_FORM`)\nexport const setNewsList = createAction(`${actionsPrefix}/SET_NEWS_LIST`)\nexport const appendNews = createAction(`${actionsPrefix}/APPEND_NEWS`)\nexport const setToZeroNewsList = createAction(`${actionsPrefix}/SET_TO_ZERO_NEWS_LIST`)\nexport const setIsLoaded = createAction(`${actionsPrefix}/SET_IS_LOADED`)\n\n\nconst isLoadingNewsList = handleActions({\n  [setIsLoadingNewsList]: (_, action) => action.payload\n}, false)\n\nconst isLoadingNewsForm = handleActions({\n  [setIsLoadingNewsForm]: (_, action) => action.payload\n}, false)\n\nconst isLoaded = handleActions({\n  [setNewsList]: (_, action) => true\n}, false)\n\nconst news = handleActions({\n  [setNewsList]: (_, action) => action.payload,\n  [appendNews]: (state, action) => [action.payload, ...state],\n  [setToZeroNewsList]: () => []\n}, [])\n\nexport default combineReducers({\n  isLoadingNewsList,\n  isLoadingNewsForm,\n  isLoaded,\n  news\n})\n\nexport const getNews = () => (dispatch, getState) => {\n  if (isLoadedSelector(getState())) return;\n  dispatch(setIsLoadingNewsList(true))\n  request({ url: '/news', method: 'GET', getState, dispatch })\n    .then(data => dispatch(setNewsList(data)))\n    .catch(error => console.log(error))\n    .finally(() => dispatch(setIsLoadingNewsList(false)))\n}\n\nexport const createNews = ({ title, text }) => (dispatch, getState) => new Promise((resolve, reject) => {\n  const data = { title, text }\n  dispatch(setIsLoadingNewsForm(true))\n  request({ url: '/news', method: 'POST', data, getState, dispatch })\n    .then(data => {\n      dispatch(setNewsList(data))\n      resolve(data)\n    })\n    .catch(error => {\n      reject(error)\n    })\n    .finally(() =>  dispatch(setIsLoadingNewsForm(false)))\n})\n\nexport const updateNews = ({ id, title, text }) => (dispatch, getState) => new Promise((resolve, reject) => {\n  const data = { title, text }\n  dispatch(setIsLoadingNewsForm(true))\n  request({ url: `/news/${id}`, method: 'PATCH', data, getState, dispatch })\n    .then(data => {\n      dispatch(setNewsList(data))\n      resolve(data)\n    })\n    .catch(error => {\n      reject(error)\n    })\n    .finally(() =>  dispatch(setIsLoadingNewsForm(false)))\n})\n\nexport const deleteNews = ({ id }) => (dispatch, getState) => new Promise((resolve, reject) => {\n  dispatch(setIsLoadingNewsList(true))\n  request({ url: `/news/${id}`, method: 'DELETE', getState, dispatch })\n    .then(data => {\n      dispatch(setNewsList(data))\n      resolve(data)\n    })\n    .catch(error => {\n      reject(error)\n    })\n    .finally(() =>  dispatch(setIsLoadingNewsList(false)))\n})","import React from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\nimport { deleteNews } from '../../store/news';\nimport {\n  Typography,\n  Card,\n  CardContent,\n  CardHeader,\n  Avatar,\n  CardActions,\n  Button\n} from '@material-ui/core';\nimport { withStyles } from '@material-ui/styles';\nimport ButtonLink from '../common/ButtonLink';\nimport { userPermissionsSelector } from '../../store/auth';\nimport _get from 'lodash.get'\n\nconst styles = theme => ({\n  wrapper: {\n    width: '100%',\n    flex: '1 1 100%',\n    paddingTop: '40px'\n  },\n  card: {\n    marginBottom: theme.spacing(2)\n  }\n});\n\nconst NewsListCard = withStyles(styles)(({ classes, post, dispatch, permission }) => {\n  const removeNews = () => {\n    dispatch(deleteNews({ id: post.id }));\n  };\n  const isUpdateAllowed = !!_get(permission, 'news.U', false);\n  const isDeleteAllowed = !!_get(permission, 'news.D', false);\n  return (\n    <Card className={classes.card}>\n      <CardHeader\n        avatar={\n          <Avatar\n            aria-label=\"recipe\"\n            src={post.user.image || '/assets/img/no-user-image.png'}\n            alt={post.user.username}\n          ></Avatar>\n        }\n        title={post.title}\n        subheader={post.created_at}\n      />\n      <CardContent>\n        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n          {post.text}\n        </Typography>\n      </CardContent>\n      <CardActions>\n      { isUpdateAllowed && <ButtonLink path={`/news/${post.id}/edit`}>Редактировать</ButtonLink> }\n      { isDeleteAllowed && <Button onClick={removeNews}>Удалить</Button> }\n      </CardActions>\n    </Card>\n  );\n});\n\nconst mapStateToProps = state => ({\n  permission: userPermissionsSelector(state)\n});\nexport default compose(\n  withStyles(styles),\n  connect(mapStateToProps)\n)(NewsListCard);\n","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport {\n  getNews,\n  isLoadingNewsListSelector,\n  isLoadedSelector,\n  newsListSelector\n} from '../../store/news';\nimport ButtonLink from '../common/ButtonLink';\nimport NewsListCard from './NewsListCard';\nimport { userPermissionsSelector } from '../../store/auth';\nimport _get from 'lodash.get';\nimport routes from '../../constants/routes';\n\nclass NewsList extends PureComponent {\n  componentDidMount() {\n    const { dispatch } = this.props;\n    dispatch(getNews());\n  }\n  render() {\n    const { isLoading, isLoaded, news, permission } = this.props;\n    const isCreateAllowed = !!_get(permission, 'news.C', false);\n    return (\n      <>\n        {isCreateAllowed && (\n          <ButtonLink color=\"primary\" path={`${routes.news}/add`}>\n            Добавить\n          </ButtonLink>\n        )}\n        <div>\n          {isLoading ? <div>Loading...</div> : null}\n          {isLoaded ? (\n            news.length ? (\n              news.map(post => <NewsListCard post={post} key={post.id} />)\n            ) : (\n              <div>Нет новостей</div>\n            )\n          ) : null}\n        </div>\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  isLoading: isLoadingNewsListSelector(state),\n  isLoaded: isLoadedSelector(state),\n  news: newsListSelector(state),\n  permission: userPermissionsSelector(state)\n});\n\nexport default connect(\n  mapStateToProps,\n  null\n)(NewsList);\n","import React, { PureComponent } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\nimport { isLoadingNewsFormSelector, createNews, updateNews, newsListSelector } from '../../store/news';\nimport { withStyles } from '@material-ui/styles';\nimport { Paper, Grid, TextField, ButtonGroup, Button } from '@material-ui/core';\nimport ButtonLink from '../common/ButtonLink';\nimport routes from '../../constants/routes';\n\nconst styles = theme => ({\n  formCard: {\n    padding: theme.spacing(2)\n  },\n  textField: {\n    display: 'block',\n    width: '100%'\n  }\n});\n\nclass NewsAdd extends PureComponent {\n  state = {\n    title: '',\n    text: '',\n    createdAt: new Date(),\n    user: ''\n  };\n  componentDidMount() {\n    const { match, newsList } = this.props;\n    if (match.params.id) {\n      const { title, text, created_at, user } = newsList.find(news => news.id === match.params.id)\n      this.setState({\n        title,\n        text,\n        createdAt: created_at,\n        user: user.username\n      })\n    }\n  }\n\n  handleChange = event => {\n    const { name, value } = event.target;\n    this.setState({ [name]: value });\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n    const { title, text } = this.state;\n    const { history, dispatch, match } = this.props;\n    dispatch(match.params.id ? updateNews({ title, text, id: match.params.id }) : createNews({ title, text })).then(() => history.push(routes.news));\n  };\n  render() {\n    const { classes } = this.props;\n    const { title, text, createdAt, user } = this.state;\n    return (\n      <Paper\n        className={classes.formCard}\n        component=\"form\"\n        onSubmit={this.handleSubmit}\n      >\n        <Grid container spacing={2}>\n          <Grid item xs={4}>\n            <TextField\n              label=\"Автор\"\n              value={user}\n              onChange={this.handleChange}\n              className={classes.textField}\n              margin=\"normal\"\n              disabled\n              fullWidth\n            />\n            <TextField\n              label=\"Дата\"\n              value={createdAt}\n              onChange={this.handleChange}\n              className={classes.textField}\n              margin=\"normal\"\n              disabled\n              fullWidth\n            />\n            <TextField\n              label=\"Заголовок\"\n              name=\"title\"\n              value={title}\n              onChange={this.handleChange}\n              className={classes.textField}\n              margin=\"normal\"\n              fullWidth\n            />\n          </Grid>\n          <Grid item xs={8}>\n            <TextField\n              label=\"Текст\"\n              name=\"text\"\n              value={text}\n              onChange={this.handleChange}\n              className={classes.textField}\n              margin=\"normal\"\n              multiline\n              fullWidth\n              rows={5}\n            />\n            <ButtonGroup>\n              <Button variant=\"contained\" color=\"secondary\" type=\"submit\">\n                Сохранить\n              </Button>\n              <ButtonLink path=\"/news\" variant=\"contained\">\n                Отменить\n              </ButtonLink>\n            </ButtonGroup>\n          </Grid>\n        </Grid>\n      </Paper>\n    );\n  }\n}\nconst mapStateToProps = state => ({\n  isLoading: isLoadingNewsFormSelector(state),\n  newsList: newsListSelector(state)\n});\nexport default compose(\n  withStyles(styles),\n  withRouter,\n  connect(\n    mapStateToProps,\n    null\n  )\n)(NewsAdd);\n","import React, { PureComponent } from 'react';\nimport { Route } from 'react-router-dom';\nimport { Container, Typography } from '@material-ui/core';\nimport { withStyles } from '@material-ui/styles';\nimport NewsList from './NewsList';\nimport NewsAdd from './NewsAdd';\n\nconst styles = theme => ({\n  wrapper: {\n    width: '100%',\n    flex: '1 1 100%',\n    paddingTop: '40px'\n  }\n});\n\nclass News extends PureComponent {\n  render() {\n    const { classes } = this.props;\n    return (\n      <div className={classes.wrapper}>\n        <Container>\n          <Typography variant=\"h4\" component=\"h2\" gutterBottom>\n            Новости компании\n          </Typography>\n\n          <Route path=\"/news\" exact component={NewsList} />\n          <Route path=\"/news/add\" component={NewsAdd} />\n          <Route path=\"/news/:id/edit\" component={NewsAdd} />\n        </Container>\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles)(News);\n","import socketIO from \"socket.io-client\";\nimport { createAction, handleActions } from \"redux-actions\";\nimport { combineReducers } from \"redux\";\nimport { userProfileSelector } from \"../auth\";\nlet socket = null;\n\nexport const chatUsersSelector = (state) => state.chat.users;\nexport const chatMessagesList = (state) => state.chat.messages;\nexport const chatSelectedRoomSelector = (state) => state.chat.selectedRoom;\nexport const chatMessageText = (state) => state.chat.messageText;\n\nconst actionsPrefix = \"CHAT\";\nexport const setUsers = createAction(`${actionsPrefix}/SET_USERS`);\nexport const addUser = createAction(`${actionsPrefix}/ADD_USER`);\nexport const updateUser = createAction(`${actionsPrefix}/UPDATE_USER`);\nexport const removeUser = createAction(`${actionsPrefix}/REMOVE_USER`);\nexport const appendMessage = createAction(`${actionsPrefix}/ADD_MESSAGE`);\nexport const setRoomHistory = createAction(`${actionsPrefix}/SET_ROOM_HISTORY`);\nexport const setToZeroMessages = createAction(`${actionsPrefix}/SET_TO_ZERO_MESSAGES`);\nexport const setSelectedRoom = createAction(`${actionsPrefix}/SET_SELECTED_ROOM`);\nexport const setMessageText = createAction(`${actionsPrefix}/SET_MESSAGE_TEXT`);\nexport const resetMessage = createAction(`${actionsPrefix}/RESET_MESSAGE`);\n\nconst users = handleActions(\n\t{\n\t\t[setUsers]: (_, action) => action.payload,\n\t\t[addUser]: (state, action) => [action.payload, ...state],\n\t\t[updateUser]: (state, action) =>\n\t\t\tstate.map((user) => (user.userId === action.payload.userId ? action.payload : user)),\n\t\t[removeUser]: (state, action) => state.filter((user) => user.socketId !== action.payload),\n\t},\n\t[]\n);\n\nconst messages = handleActions(\n\t{\n\t\t[appendMessage]: (state, action) => [...state, action.payload],\n\t\t[setRoomHistory]: (state, action) => action.payload,\n\t\t[setToZeroMessages]: () => [],\n\t},\n\t[]\n);\n\nconst selectedRoom = handleActions(\n\t{\n\t\t[setSelectedRoom]: (_, action) => action.payload,\n\t},\n\tnull\n);\n\nconst messageText = handleActions(\n\t{\n\t\t[setMessageText]: (_, action) => action.payload,\n\t\t[resetMessage]: () => \"\",\n\t},\n\t\"\"\n);\n\nexport default combineReducers({\n\tusers,\n\tmessages,\n\tselectedRoom,\n\tmessageText,\n});\n\nexport const connectSocket = () => (dispatch, getState) => {\n\tconst userProfile = userProfileSelector(getState());\n\tconst port = window.location.port ? `:${window.location.port}` : \"\";\n\tsocket = socketIO(`${window.location.protocol}//${window.location.hostname}${port}`);\n\n\tsocket.emit(\"users:connect\", { userId: userProfile.id, username: userProfile.username });\n\n\tsocket\n\t\t.on(\"users:list\", (data) => dispatch(setUsers(data)))\n\t\t.on(\"users:add\", (data) => dispatch(addUser(data)))\n\t\t.on(\"users:leave\", (data) => {\n\t\t\tdispatch(removeUser(data));\n\t\t\tconst selectedRoom = chatSelectedRoomSelector(getState());\n\t\t\tif (selectedRoom && selectedRoom.socketId === data) dispatch(setSelectedRoom(null));\n\t\t})\n\t\t.on(\"message:history\", (data) => dispatch(setRoomHistory(data)))\n\t\t.on(\"message:add\", (data) => dispatch(appendMessage(data)));\n};\n\nexport const connectRoom = ({ userId, socketId }) => (dispatch, getState) => {\n\tconst userProfile = userProfileSelector(getState());\n\tdispatch(setToZeroMessages());\n\tdispatch(setSelectedRoom({ recipientId: userId, socketId }));\n\n\tsocket.emit(\"message:history\", { recipientId: userId, userId: userProfile.id });\n};\n\nexport const sendMessage = () => (dispatch, getState) => {\n\tconst state = getState();\n\tconst userProfile = userProfileSelector(state);\n\tconst selectedRoom = chatSelectedRoomSelector(state);\n\tconst messageText = chatMessageText(state);\n\tsocket.emit(\"message:add\", {\n\t\tsenderId: userProfile.id,\n\t\trecipientId: selectedRoom.recipientId,\n\t\troomId: selectedRoom.socketId,\n\t\ttext: messageText,\n\t});\n\tdispatch(resetMessage());\n};\n\nexport const disconnectSocket = () => (dispatch) => {\n\tsocket && socket.disconnect();\n\tdispatch(setUsers([]));\n\tdispatch(setToZeroMessages());\n\tdispatch(setSelectedRoom(null));\n\tdispatch(resetMessage());\n};\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport {\n  Paper,\n  List,\n  ListItem,\n  ListItemText,\n  Typography,\n  CardHeader,\n  Divider,\n  ListItemSecondaryAction,\n  Badge\n} from '@material-ui/core';\nimport MailIcon from '@material-ui/icons/Mail';\nimport { withStyles } from '@material-ui/styles';\nimport { compose } from 'recompose';\nimport { chatUsersSelector, chatSelectedRoomSelector, connectRoom } from '../../store/chat';\nconst styles = theme => ({\n  column: {\n    // backgroundColor: '#494949',\n    height: 'calc(100vh - 80px)',\n    display: 'flex',\n    flexDirection: 'column'\n  }\n});\n\nconst ChannelsList = ({ classes, users, selectedRoom, dispatch }) => {\n  const selectRoom = user => {\n    dispatch(connectRoom({ userId: user.userId, socketId: user.socketId }));\n  };\n  return (\n    <Paper className={classes.column} square>\n      <CardHeader title={<Typography variant=\"h5\">Личные чаты</Typography>} />\n      <Divider />\n      <List>\n        {users.map((user, index) => (\n          <ListItem\n            button\n            key={user.userId}\n            selected={user.userId === selectedRoom && selectedRoom.userId}\n            onClick={() => selectRoom(user)}\n          >\n            <ListItemText primary={user.username} />\n          </ListItem>\n        ))}\n      </List>\n    </Paper>\n  );\n};\nconst mapStateToProps = state => ({\n  users: chatUsersSelector(state),\n  selectedRoom: chatSelectedRoomSelector(state)\n});\nexport default compose(\n  withStyles(styles),\n  connect(mapStateToProps)\n)(ChannelsList);\n","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport { Grid, Card, CardContent, CardActions, TextField, Button } from '@material-ui/core';\nimport { withStyles } from '@material-ui/styles';\nimport classNames from 'classnames';\nimport _get from 'lodash.get';\nimport { sendMessage, setMessageText, chatMessageText } from '../../store/chat';\nimport { compose } from 'recompose';\nimport { userProfileSelector, userPermissionsSelector } from '../../store/auth';\nconst styles = theme => ({\n  messageContainer: {\n    marginBottom: theme.spacing(2)\n  },\n  message: {\n    padding: theme.spacing(1)\n  },\n  messagePrimary: {\n    backgroundColor: theme.palette.grey.A700\n  },\n  messageSecondary: {\n    backgroundColor: theme.palette.secondary.main\n  },\n  isMyMessage: {\n    alignSelf: 'end'\n  },\n  isAnotherMessage: {\n    alignSelf: 'flex-end'\n  },\n  chatArea: {\n    height: '100%',\n    overflowY: 'scroll'\n  },\n  form: {\n    display: 'flex',\n    alignItems: 'center',\n    width: '100%'\n  }\n});\n\nclass ActiveChannelArea extends PureComponent {\n  handleChange = event => {\n    const { dispatch } = this.props;\n    dispatch(setMessageText(event.target.value));\n  };\n  handleSubmit = event => {\n    event.preventDefault();\n    const { dispatch } = this.props;\n    dispatch(sendMessage());\n  };\n  render() {\n    const { classes, messages, messageText, userId, permission } = this.props;\n    const isCreateAllowed = !!_get(permission, 'chat.C', false);\n    return (\n      <>\n        <CardContent className={classes.chatArea}>\n          <Grid container direction=\"column\" wrap=\"nowrap\">\n            {messages.map((message, i) => (\n              <Grid\n                item\n                key={i}\n                className={classNames(\n                  classes.messageContainer,\n                  message.senderId !== userId ? classes.isMyMessage : classes.isAnotherMessage\n                )}\n              >\n                <Card\n                  className={classNames(\n                    classes.message,\n                    message.senderId !== userId ? classes.messagePrimary : classes.messageSecondary\n                  )}\n                >\n                  {message.text}\n                </Card>\n              </Grid>\n            ))}\n          </Grid>\n        </CardContent>\n        {isCreateAllowed && (\n          <CardActions>\n            <form onSubmit={this.handleSubmit} className={classes.form}>\n              <TextField\n                label=\"Label\"\n                style={{ margin: 8 }}\n                fullWidth\n                margin=\"normal\"\n                variant=\"filled\"\n                InputLabelProps={{\n                  shrink: true\n                }}\n                value={messageText}\n                onChange={this.handleChange}\n              />\n              <Button variant=\"contained\" color=\"primary\" type=\"submit\">\n                Отправить\n              </Button>\n            </form>\n          </CardActions>\n        )}\n      </>\n    );\n  }\n}\nconst mapStateToProps = state => ({\n  messageText: chatMessageText(state),\n  userId: userProfileSelector(state).id,\n  permission: userPermissionsSelector(state)\n});\nexport default compose(\n  withStyles(styles),\n  connect(mapStateToProps)\n)(ActiveChannelArea);\n","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux'\nimport { connectSocket, disconnectSocket, chatUsersSelector, chatSelectedRoomSelector, chatMessagesList } from '../../store/chat'\nimport {\n  Grid,\n  Container,\n  Card\n} from '@material-ui/core';\nimport { withStyles } from '@material-ui/styles';\nimport ChatChannelsList from './ChatChannelList'\nimport ChatActiveChatArea from './ChatActiveChatArea'\nimport { compose } from 'recompose';\nconst styles = theme => ({\n  toolbar: theme.mixins.toolbar,\n  column: {\n    // backgroundColor: '#494949',\n    height: 'calc(100vh - 80px)',\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  wrapper: {\n    width: '100%',\n    flex: '1 1 100%',\n    paddingTop: theme.spacing(1)\n  },\n  empty: {\n    padding: theme.spacing(3)\n  }\n});\n\nclass Chat extends PureComponent {\n  componentDidMount () {\n    const { dispatch } = this.props;\n    dispatch(connectSocket())\n  }\n\n  componentWillUnmount () {\n    const { dispatch } = this.props;\n    dispatch(disconnectSocket())\n  }\n  render() {\n    const { classes, users, messages, selectedRoom } = this.props;\n    return (\n      <div className={classes.wrapper}>\n        <Container>\n          <Grid container spacing={1}>\n            <Grid item xs={4}>\n              <ChatChannelsList users={users} selected={selectedRoom} />\n            </Grid>\n            <Grid item xs={8}>\n              <Card className={classes.column} square>\n                { selectedRoom ? <ChatActiveChatArea messages={messages} /> : <div className={classes.empty}>Выберите чат</div> }\n              </Card>\n            </Grid>\n          </Grid>\n        </Container>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  users: chatUsersSelector(state),\n  selectedRoom: chatSelectedRoomSelector(state),\n  messages: chatMessagesList(state)\n})\nexport default compose(withStyles(styles), connect(mapStateToProps))(Chat);\n","import React, { PureComponent } from 'react';\nimport { compose } from 'recompose';\nimport { connect } from 'react-redux';\nimport {\n  Container,\n  Typography,\n  Avatar,\n  Grid,\n  Paper,\n  Button,\n  TextField,\n  CardActions\n} from '@material-ui/core';\nimport AspectRatio from 'react-aspect-ratio';\nimport PasswordInput from '../common/PasswordInput';\nimport { withStyles } from '@material-ui/styles';\nimport { userProfileSelector, saveProfile, isLoadingUserProfileSelector } from '../../store/auth';\n\nconst styles = theme => ({\n  wrapper: {\n    width: '100%',\n    flex: '1 1 100%',\n    paddingTop: '40px'\n  },\n  formCard: {\n    padding: theme.spacing(2)\n  },\n  avatarPreview: {\n    width: '100%',\n    height: '100%',\n    borderRadius: '8px'\n  },\n  avatarPreviewWrapper: {\n    marginBottom: theme.spacing(2),\n    width: '100%'\n  },\n  uploadButton: {\n    display: 'block',\n    textAlign: 'center'\n  },\n  form: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    marginBottom: theme.spacing(3)\n  },\n  textField: {\n    marginLeft: theme.spacing(1),\n    marginRight: theme.spacing(1),\n    width: 200\n  },\n  formActions: {\n    marginTop: 'auto',\n    padding: 0\n  }\n});\n\nclass Profile extends PureComponent {\n  state = {\n    firstName: '',\n    middleName: '',\n    surName: '',\n    oldPassword: '',\n    newPassword: '',\n    confirmPassword: '',\n    image: '',\n    fileRef: React.createRef()\n  };\n\n  componentDidMount() {\n    const { userProfile } = this.props;\n    this.setState({\n      firstName: userProfile.firstName,\n      middleName: userProfile.middleName,\n      surName: userProfile.surName,\n      image: userProfile.image\n    });\n  }\n\n  cancelHandler = () => {\n    const { userProfile } = this.props;\n    this.setState({\n      firstName: userProfile.firstName,\n      middleName: userProfile.middleName,\n      surName: userProfile.surName,\n      oldPassword: '',\n      newPassword: '',\n      confirmPassword: '',\n      image: userProfile.image\n    });\n  };\n\n  handleChange = event => {\n    const { name, value } = event.target;\n    this.setState({ [name]: value });\n  };\n\n  handleChangeFile = () => {\n    const { fileRef } = this.state;\n\n    const reader = new FileReader();\n\n    reader.onload = e => {\n      this.setState({ image: e.target.result });\n    };\n\n    fileRef.current.files[0] && reader.readAsDataURL(fileRef.current.files[0]);\n  };\n\n  submitHandler = () => {\n    const { dispatch } = this.props;\n    const { firstName, surName, middleName, oldPassword, newPassword, fileRef } = this.state;\n    dispatch(\n      saveProfile({\n        firstName,\n        surName,\n        middleName,\n        oldPassword,\n        newPassword,\n        avatar: fileRef.current.files[0] || null\n      })\n    ).then(() => {\n      this.cancelHandler();\n    });\n  };\n\n  render() {\n    const { classes, isLoading } = this.props;\n    const {\n      firstName,\n      surName,\n      middleName,\n      oldPassword,\n      newPassword,\n      confirmPassword,\n      image,\n      fileRef\n    } = this.state;\n    return (\n      <div className={classes.wrapper}>\n        <Container>\n          <Paper className={classes.formCard}>\n            <Grid container spacing={2}>\n              <Grid item xs={4}>\n                <AspectRatio className={classes.avatarPreviewWrapper}>\n                  <Avatar\n                    className={classes.avatarPreview}\n                    src={image || '/assets/img/no-user-image-big.png'}\n                  ></Avatar>\n                </AspectRatio>\n                <Button\n                  className={classes.uploadButton}\n                  variant=\"contained\"\n                  component=\"label\"\n                  color=\"primary\"\n                >\n                  Выбрать файл\n                  <input\n                    type=\"file\"\n                    style={{ display: 'none' }}\n                    ref={fileRef}\n                    onChange={this.handleChangeFile}\n                  />\n                </Button>\n              </Grid>\n              <Grid item xs={8}>\n                <Grid container direction=\"column\" style={{ height: '100%' }}>\n                  <Typography variant=\"h4\" component=\"h2\" gutterBottom>\n                    Общая информация\n                  </Typography>\n                  <div className={classes.form}>\n                    <TextField\n                      label=\"Фамилия\"\n                      className={classes.textField}\n                      margin=\"normal\"\n                      name=\"surName\"\n                      value={surName}\n                      onChange={this.handleChange}\n                    />\n                    <TextField\n                      label=\"Имя\"\n                      className={classes.textField}\n                      margin=\"normal\"\n                      name=\"firstName\"\n                      value={firstName}\n                      onChange={this.handleChange}\n                    />\n                    <TextField\n                      label=\"Отчество\"\n                      className={classes.textField}\n                      margin=\"normal\"\n                      name=\"middleName\"\n                      value={middleName}\n                      onChange={this.handleChange}\n                    />\n                  </div>\n                  <Typography variant=\"h4\" component=\"h2\" gutterBottom>\n                    Пароль\n                  </Typography>\n                  <div className={classes.form}>\n                    <PasswordInput\n                      label=\"Старый пароль\"\n                      className={classes.textField}\n                      name=\"oldPassword\"\n                      value={oldPassword}\n                      handleChange={this.handleChange}\n                    />\n                    <PasswordInput\n                      label=\"Новый пароль\"\n                      className={classes.textField}\n                      name=\"newPassword\"\n                      value={newPassword}\n                      handleChange={this.handleChange}\n                    />\n                    <PasswordInput\n                      label=\"Подтверждение пароля\"\n                      className={classes.textField}\n                      name=\"confirmPassword\"\n                      value={confirmPassword}\n                      handleChange={this.handleChange}\n                    />\n                  </div>\n                  <CardActions className={classes.formActions}>\n                    <Button\n                      color=\"primary\"\n                      variant=\"contained\"\n                      disabled={isLoading}\n                      onClick={this.submitHandler}\n                    >\n                      Сохранить\n                    </Button>\n                    <Button variant=\"outlined\" onClick={this.cancelHandler} disabled={isLoading}>\n                      Сбросить\n                    </Button>\n                  </CardActions>\n                </Grid>\n              </Grid>\n            </Grid>\n          </Paper>\n        </Container>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  userProfile: userProfileSelector(state),\n  isLoading: isLoadingUserProfileSelector(state)\n});\n\nexport default compose(\n  withStyles(styles),\n  connect(mapStateToProps)\n)(Profile);\n","import { createAction, handleActions } from 'redux-actions';\nimport { combineReducers } from 'redux';\nimport request from '../../helpers/request';\nimport _get from 'lodash.get'\nimport { openNotification } from '../notifications';\nimport { userProfileSelector, getUserProfileFromToken } from '../auth'\n\nexport const isLoadingUsersSelector = state => state.adminPanel.isLoadingUsers;\nexport const usersSelector = state => state.adminPanel.users;\n\nconst actionsPrefix = 'ADMIN_PANEL';\nexport const setIsLoadingUsers = createAction(`${actionsPrefix}/SET_IS_LOADING_USERS`);\nexport const setIsLoadingForm = createAction(`${actionsPrefix}/SET_IS_LOADING_FORM`);\nexport const setUsers = createAction(`${actionsPrefix}/SET_USERS`);\nexport const setToZeroUsers = createAction(`${actionsPrefix}/SET_TO_ZERO_USERS`);\n\nconst isLoadingUsers = handleActions(\n  {\n    [setIsLoadingUsers]: (_, action) => action.payload\n  },\n  false\n);\n\nconst isLoadingForm = handleActions({ [setIsLoadingForm]: (_, action) => action.payload }, false);\n\nconst users = handleActions(\n  {\n    [setUsers]: (_, action) => action.payload,\n    [setToZeroUsers]: () => []\n  },\n  []\n);\n\nexport default combineReducers({\n  isLoadingUsers,\n  isLoadingForm,\n  users\n});\n\nexport const getUsers = () => (dispatch, getState) => {\n  dispatch(setIsLoadingUsers(true));\n  request({ url: '/users', getState, dispatch })\n    .then(data => {\n      dispatch(setUsers(data));\n    })\n    .catch(error =>\n      openNotification({\n        text: error.message,\n        variant: 'error'\n      })\n    )\n    .finally(() => dispatch(setIsLoadingUsers(false)));\n};\n\nexport const updateUserPermission = (userId, permission) => (dispatch, getState) => new Promise((resolve) => {\n  dispatch(setIsLoadingForm(true));\n  request({\n    url: `/users/${userId}/permission`,\n    method: 'PATCH',\n    data: { permission },\n    getState,\n    dispatch\n  })\n    .then(() => {\n      openNotification({ text: 'Успешно!', variant: 'success' });\n      dispatch(getUsers());\n      const isSelf = _get(userProfileSelector(getState()), 'id', null) === userId;\n      isSelf && dispatch(getUserProfileFromToken())\n      resolve(true)\n    })\n    .catch(error => {\n      openNotification({\n        text: error.message,\n        variant: 'error'\n      })\n    })\n    .finally(() => dispatch(setIsLoadingForm(false)))\n});\n\n\nexport const deleteUser = userId => (dispatch, getState) => new Promise((resolve) => {\n  dispatch(setIsLoadingForm(true));\n  request({ url: `/users/${userId}`, method: 'DELETE', getState, dispatch })\n    .then(data => {\n      dispatch(getUsers(data));\n      resolve(true)\n    })\n    .catch(error => {\n      openNotification({\n        text: error.message,\n        variant: 'error'\n      })\n    })\n    .finally(() => dispatch(setIsLoadingForm(false)));\n});","import React from \"react\";\nimport {\n  Typography,\n  FormGroup,\n  FormControlLabel,\n  Checkbox\n} from \"@material-ui/core\";\n\n\nconst SettingsFormGroup = ({ handleChange, values, label }) => (\n  <>\n    <Typography variant=\"h5\" component=\"h3\" gutterBottom>\n      {label}\n    </Typography>\n    <FormGroup>\n      <FormControlLabel\n        control={\n          <Checkbox\n            checked={values.C}\n            value=\"create\"\n            onChange={handleChange(\"C\")}\n          />\n        }\n        label=\"Создание\"\n      />\n      <FormControlLabel\n        control={\n          <Checkbox\n            checked={values.R}\n            value=\"read\"\n            onChange={handleChange(\"R\")}\n          />\n        }\n        label=\"Чтение\"\n      />\n      <FormControlLabel\n        control={\n          <Checkbox\n            checked={values.U}\n            value=\"update\"\n            onChange={handleChange(\"U\")}\n          />\n        }\n        label=\"Редактирование\"\n      />\n      <FormControlLabel\n        control={\n          <Checkbox\n            checked={values.D}\n            value=\"delete\"\n            onChange={handleChange(\"D\")}\n          />\n        }\n        label=\"Удаление\"\n      />\n    </FormGroup>\n  </>\n);\n\nexport default SettingsFormGroup","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\nimport _cloneDeep from 'lodash/cloneDeep';\nimport {\n  isLoadingUsersSelector,\n  usersSelector,\n  getUsers,\n  updateUserPermission,\n  deleteUser\n} from '../../store/adminPanel';\nimport {\n  Container,\n  Avatar,\n  Grid,\n  Paper,\n  Button,\n  ButtonGroup,\n  Select,\n  FormControl,\n  MenuItem,\n  InputLabel\n} from '@material-ui/core';\nimport { withStyles } from '@material-ui/styles';\nimport SettingsFormGroup from './AdminPanelSettingsFormGroup';\n\nconst styles = theme => ({\n  wrapper: {\n    width: '100%',\n    flex: '1 1 100%',\n    paddingTop: '40px'\n  },\n  formCard: {\n    padding: theme.spacing(2)\n  },\n  userSelect: {\n    width: '100%'\n  },\n  userAvatar: {\n    marginRight: theme.spacing(2)\n  },\n  mb3: {\n    marginBottom: theme.spacing(3)\n  }\n});\n\nconst defaultState = {\n  selectedUserId: '',\n  selectedUser: null,\n  permission: {\n    chat: {\n      C: true,\n      R: true,\n      U: false,\n      D: false\n    },\n    news: {\n      C: true,\n      R: true,\n      U: false,\n      D: false\n    },\n    settings: {\n      C: true,\n      R: true,\n      U: false,\n      D: false\n    }\n  }\n};\n\nclass AdminPanel extends PureComponent {\n  state = defaultState;\n\n  componentDidMount() {\n    const { dispatch } = this.props;\n    dispatch(getUsers());\n  }\n\n  handleChange = part => partRule => event => {\n    const { checked } = event.target;\n    const { permission } = this.state;\n    this.setState({\n      permission: {\n        ...permission,\n        [part]: { ...permission[part], [partRule]: checked }\n      }\n    });\n  };\n  handleChangeUser = event => {\n    const { users } = this.props;\n    const { value } = event.target;\n    const selectedUser = value ? _cloneDeep(users.find(u => u.id === value)) : null;\n    this.setState({\n      selectedUserId: value,\n      selectedUser,\n      permission: selectedUser.permission\n    });\n  };\n\n  submitHandler = () => {\n    const { permission, selectedUserId } = this.state;\n    const { dispatch } = this.props;\n    dispatch(updateUserPermission(selectedUserId, permission));\n  };\n\n  cancelHandler = () => {\n    const { users } = this.props;\n    const { selectedUserId } = this.state;\n    const selectedUser = _cloneDeep(users.find(u => u.id === selectedUserId));\n    selectedUserId &&\n      this.setState({\n        selectedUser,\n        permission: selectedUser.permission\n      });\n  };\n\n  deleteHandler = () => {\n    const { selectedUserId } = this.state;\n    const { dispatch } = this.props;\n    selectedUserId && dispatch(deleteUser(selectedUserId)).then(() => this.setState(defaultState));\n  };\n\n  render() {\n    const { classes, users } = this.props;\n    const { selectedUserId, selectedUser } = this.state;\n    return (\n      <div className={classes.wrapper}>\n        <Container>\n          <Paper className={classes.formCard}>\n            <Grid container wrap=\"nowrap\" alignItems=\"center\" className={classes.mb3}>\n              <Avatar\n                src={(selectedUser && selectedUser.image) || '/assets/img/no-user-image.png'}\n                className={classes.userAvatar}\n              ></Avatar>\n              <FormControl className={classes.userSelect}>\n                <InputLabel htmlFor=\"age-simple\">Выберите пользователя</InputLabel>\n                <Select value={selectedUserId} onChange={this.handleChangeUser}>\n                  <MenuItem value={null}>Не выбран</MenuItem>\n                  {users.map(user => (\n                    <MenuItem value={user.id} key={user.id}>\n                      {user.username}\n                    </MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n            </Grid>\n            {selectedUser && this.renderForms()}\n          </Paper>\n        </Container>\n      </div>\n    );\n  }\n  renderForms() {\n    const { classes } = this.props;\n    const { permission } = this.state;\n    return (\n      <>\n        <Grid container spacing={2} className={classes.mb3}>\n          <Grid item xs={4}>\n            <SettingsFormGroup\n              label=\"Настройки системы\"\n              values={permission['settings']}\n              handleChange={this.handleChange('settings')}\n            />\n          </Grid>\n          <Grid item xs={4}>\n            <SettingsFormGroup\n              label=\"Новости\"\n              values={permission['news']}\n              handleChange={this.handleChange('news')}\n            />\n          </Grid>\n          <Grid item xs={4}>\n            <SettingsFormGroup\n              label=\"Чат\"\n              values={permission['chat']}\n              handleChange={this.handleChange('chat')}\n            />\n          </Grid>\n        </Grid>\n        <Grid container spacing={2} justify=\"center\" alignItems=\"center\">\n          <ButtonGroup>\n            <Button variant=\"contained\" color=\"secondary\" onClick={this.submitHandler}>\n              Сохранить\n            </Button>\n            <Button variant=\"contained\" onClick={this.cancelHandler}>\n              Отменить\n            </Button>\n            <Button variant=\"contained\" onClick={this.deleteHandler}>\n              Удалить пользователя\n            </Button>\n          </ButtonGroup>\n        </Grid>\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  isLoading: isLoadingUsersSelector(state),\n  users: usersSelector(state)\n});\n\nexport default compose(\n  withStyles(styles),\n  connect(mapStateToProps)\n)(AdminPanel);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport {\n  notificationsSelector,\n  openNotification,\n  closeNotification\n} from '../../store/notifications';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport InfoIcon from '@material-ui/icons/Info';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { amber, green } from '@material-ui/core/colors';\nimport IconButton from '@material-ui/core/IconButton';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\nimport WarningIcon from '@material-ui/icons/Warning';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst variantIcon = {\n  success: CheckCircleIcon,\n  warning: WarningIcon,\n  error: ErrorIcon,\n  info: InfoIcon\n};\n\nconst useStyles1 = makeStyles(theme => ({\n  success: {\n    backgroundColor: green[600]\n  },\n  error: {\n    backgroundColor: theme.palette.error.dark\n  },\n  info: {\n    backgroundColor: theme.palette.primary.main\n  },\n  warning: {\n    backgroundColor: amber[700]\n  },\n  icon: {\n    fontSize: 20\n  },\n  iconVariant: {\n    opacity: 0.9,\n    marginRight: theme.spacing(1)\n  },\n  message: {\n    display: 'flex',\n    alignItems: 'center'\n  }\n}));\n\nfunction MySnackbarContentWrapper(props) {\n  const classes = useStyles1();\n  const { className, message, onClose, variant, ...other } = props;\n  const Icon = variantIcon[variant];\n\n  return (\n    <SnackbarContent\n      className={clsx(classes[variant], className)}\n      aria-describedby=\"client-snackbar\"\n      message={\n        <span id=\"client-snackbar\" className={classes.message}>\n          <Icon className={clsx(classes.icon, classes.iconVariant)} />\n          {message}\n        </span>\n      }\n      action={[\n        <IconButton\n          key=\"close\"\n          aria-label=\"close\"\n          color=\"inherit\"\n          onClick={onClose}\n        >\n          <CloseIcon className={classes.icon} />\n        </IconButton>\n      ]}\n      {...other}\n    />\n  );\n}\n\nMySnackbarContentWrapper.propTypes = {\n  className: PropTypes.string,\n  message: PropTypes.string,\n  onClose: PropTypes.func,\n  variant: PropTypes.oneOf(['error', 'info', 'success', 'warning']).isRequired\n};\n\nexport default WrappedComponent => {\n  const withNotifications = ({\n    openNotification,\n    closeNotification,\n    notifications,\n    ...other\n  }) => {\n    const handleClose = notificationId => (e, reason) => {\n      if (reason === 'clickaway') {\n        return;\n      }\n      closeNotification(notificationId);\n    };\n    const currentNotification = notifications.find(\n      notification => !!notification.isActive\n    );\n    return (\n      <>\n        <WrappedComponent {...other} openNotification={openNotification} />\n        {currentNotification && (\n          <Snackbar\n            anchorOrigin={{\n              vertical: 'bottom',\n              horizontal: 'right'\n            }}\n            open\n            autoHideDuration={2500}\n            onClose={handleClose(currentNotification.id)}\n          >\n            <MySnackbarContentWrapper\n              onClose={handleClose(currentNotification.id)}\n              variant={currentNotification.variant}\n              message={currentNotification.text}\n            />\n          </Snackbar>\n        )}\n      </>\n    );\n  };\n\n  const mapStateToProps = state => ({\n    notifications: notificationsSelector(state)\n  });\n  const mapDispatchToProps = {\n    openNotification,\n    closeNotification\n  };\n  return connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(withNotifications);\n};\n","import React, { PureComponent } from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport PrivateRoute from '../common/PrivateRoute';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\nimport { getUserProfileFromToken } from '../../store/auth';\nimport routes from '../../constants/routes'\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Box from '@material-ui/core/Box';\nimport AppHeader from './AppHeader';\nimport Auth from '../Auth';\nimport News from '../News';\nimport Chat from '../Chat';\nimport Profile from '../Profile';\nimport AdminPanel from '../AdminPanel';\nimport withNotifications from '../common/withNotificationsHOC';\n\n\nconst styles = () => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n    height: '100%',\n    minHeight: '100vh',\n    backgroundColor: '#f5f5f5'\n  },\n  container: {\n    flex: '1 1 100%',\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  mainLayoutWrapper: {\n    background: 'url(\"/assets/img/another-background.png\") no-repeat',\n    backgroundPosition: 'center center',\n    backgroundSize: 'cover',\n    width: '100%',\n    flex: '1 1 100%',\n    display: 'flex',\n    alignItems: 'stretch'\n  }\n});\n\nconst MainLayout = withStyles(styles)(({ children, classes }) => (\n  <div className={classes.mainLayoutWrapper}>{children}</div>\n));\n\nconst withLayout = Component => props => (\n  <MainLayout>\n    <Component {...props} />\n  </MainLayout>\n);\n\nconst withLayoutAndNotifications = Component =>\n  withNotifications(withLayout(Component));\n\nclass App extends PureComponent {\n  componentDidMount() {\n    this.props.dispatch(getUserProfileFromToken());\n  }\n  render() {\n    const { classes } = this.props;\n    return (\n      <div className={classes.root}>\n        <AppHeader />\n        <Box className={classes.container}>\n          <Switch>\n            <Route path={routes.home} exact component={withNotifications(Auth)} />\n            <Route path={routes.registration} component={withNotifications(Auth)} />\n            <PrivateRoute\n              permissionPath=\"news\"\n              path={routes.news}\n              component={withLayoutAndNotifications(News)}\n            />\n            <PrivateRoute\n              permissionPath=\"chat\"\n              path={routes.chat}\n              component={withLayoutAndNotifications(Chat)}\n            />\n            <PrivateRoute\n              path={routes.profile}\n              component={withLayoutAndNotifications(Profile)}\n            />\n            <PrivateRoute\n              permissionPath=\"settings\"\n              path={routes.adminPanel}\n              component={withLayoutAndNotifications(AdminPanel)}\n            />\n          </Switch>\n        </Box>\n      </div>\n    );\n  }\n}\n\nexport default compose(\n  withStyles(styles),\n  connect()\n)(App);\n","import { red } from '@material-ui/core/colors'\nimport { createMuiTheme } from '@material-ui/core/styles';\n\n// A custom theme for this app\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: '#63c1a0',\n    },\n    secondary: {\n      main: '#19857b',\n    },\n    error: {\n      main: red.A400,\n    },\n    background: {\n      default: 'rgba(255, 255, 255, .87)',\n    },\n  },\n});\n\nexport default theme;","import { createStore, compose, applyMiddleware, combineReducers } from 'redux';\nimport thunk from 'redux-thunk';\nimport auth from './auth';\nimport notifications from './notifications';\nimport news from './news';\nimport adminPanel from './adminPanel';\nimport chat from './chat';\n\nconst rootReducer = combineReducers({\n  auth,\n  notifications,\n  news,\n  adminPanel,\n  chat\n});\n\nconst createAppStore = () => {\n  const store = createStore(\n    rootReducer,\n    compose(\n      applyMiddleware(thunk),\n      window.__REDUX_DEVTOOLS_EXTENSION__ ? window.__REDUX_DEVTOOLS_EXTENSION__() : noop => noop\n    )\n  );\n\n  return store;\n};\n\nexport default createAppStore;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport { BrowserRouter } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport { CssBaseline } from '@material-ui/core';\nimport { ThemeProvider } from '@material-ui/styles';\nimport theme from './theme';\nimport createAppStore from './store';\nReactDOM.render(\n  <ThemeProvider theme={theme}>\n    <CssBaseline />\n    <Provider store={createAppStore()}>\n      <BrowserRouter>\n        <App />\n      </BrowserRouter>\n    </Provider>\n  </ThemeProvider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}